jQuery(document).ready(function($) {
// CSS lazyload
$(window).on('load', function(){$('link[rel="subresource"]').attr('rel', 'stylesheet');});
// Loading animation
$(".loading-wrapper").fadeOut(2600);
$(".loader").fadeIn(120);
$(".loader").fadeOut(2600);
$(".loading-wrapper-section").fadeOut(2600);
// Video section height
var winH = $(window).height();
$('#js-video-section').outerHeight(winH);
$(window).on('load',function(){setVideo($('#js-header-video'));});
$(window).on('resize',function(){winH = $(window).height(); $('#js-video-section').outerHeight(winH);setVideo($('#js-header-video'));});
function setVideo(object){var imgW=object.width();var imgH=object.height();var winW=$(window).width();var winH=$(window).height();var scaleW=winW/imgW;var scaleH=winH/imgH;var fixScale=Math.max(scaleW,scaleH);var setW=imgW*fixScale;var setH=imgH*fixScale;var moveX=Math.floor((winW-setW)/2);var moveY=Math.floor((winH-setH)/2);object.css({'height':setH,'left':moveX,'top':moveY,'width':setW})}
// YouTube
$('#js-header-youtube').YTPlayer();
// Header message height
$(window).on("load resize",function(){var e=$(".header-target-message").outerHeight(!0),t=$(".header-title").outerHeight(!0),h=$(".header-sub-title").height(),r=$(".header-btn").outerHeight(!0);$(".header-message").css("height",e+t+h+r+"px")});
// Image sliders
var slider=$("#bxslider");slider.bxSlider({pause:slider.data("speed"),randomStart:false,mode:slider.data("animation"),speed:slider.data("speed"),pager:slider.data("pager"),controls:slider.data("controls"),useCSS:!1,auto:slider.data("auto"),infiniteLoop:!0});
// Text sliders
var slidertext=$("#bxslider-text");slidertext.bxSlider({pause:slidertext.data("speed"),randomStart:false,mode:slidertext.data("animation"),speed:slidertext.data("speed"),pager:false,controls:false,useCSS:!1,auto:slidertext.data("auto"),infiniteLoop:!0,onSlideAfter:function(){slidertext.startAuto()}});
// Old Text sliders
var textSlider=$("#flexslider");textSlider.flexslider({selector:"#slides li",animation:textSlider.data("animation"),slideshowSpeed:textSlider.data("speed"),animationSpeed:textSlider.data("speed"),slideshow:textSlider.data("slideshow"),pauseOnAction:!1,keyboardNav:!0,controlNav:!1,directionNav:!1});
// Default flexslider height
$('#flexslider').delay(100).queue(function(next){$(this).removeClass('flexslider-height');next();});
// Featured list slider
$("#featured-slider").slick({arrows:!0,slidesToShow:3,slidesToScroll:1,autoplay:!0,cssEase:"ease",speed:500,autoplaySpeed:6e3,responsive:[{breakpoint:768,settings:{slidesToShow:1,slidesToScroll:1}}]});
// Page box
$(".pagebox-list").mosaic({animation:"slide",speed:50});
// Match height
$(".archive-list,.user-profile,.box-list").matchHeight();
// Nav tab
$('.nav-tab').on('click',function(){var $th = $(this).index();$('.nav-tab').removeClass('nav-tab-active');$('.tab-panel').removeClass('nav-tab-active');$(this).addClass('nav-tab-active');$('.tab-panel').eq($th).addClass('nav-tab-active');
});
//.開閉
$('.toggle-trigger').click(function() {$(this).toggleClass("clicked");$(this).next('.toggle-slide').slideToggle(200);});
// Breadcrumb
$("#breadcrumb").rcrumbs();
// Modal menu #link
if($(".modal-menu").length){var o=$("[data-remodal-id=modal-global-nav]").remodal();$(document).on("click",".modal-menu a",function(){return o.open(),!1}),$(document).on("click",".menu-item-type-custom a",function(){o.close()});;}
$(".js-modal-menu .modal-gloval-icon").click(function(){setTimeout(function(){var WindowHeight = $("#modal-global-nav-container").outerHeight();$(".remodal").css('height',WindowHeight+'px');},300);})
// LP modal menu #link
if($(".modal-menu-lp").length){var o=$("[data-remodal-id=modal-global-nav-lp]").remodal();$(document).on("click",".modal-menu a",function(){return o.open(),!1}),$(document).on("click",".exit-remodal a",function(){o.close()});;}
// Toggle `focus` class to allow modal submenu
$("#modal-global-nav-container .menu-item-has-children > a").click(function(a){var b = $(this).parent("li");if(!b.hasClass("focus")){a.preventDefault();a.preventDefault();b.toggleClass("focus");b.siblings(".focus").removeClass("focus")}});
$(".modal-global-nav-close").click(function(){$(".global-nav li").removeClass("focus");})
// SNS window open
for(var shareButton=document.getElementsByClassName("share"),i=0;i<shareButton.length;i++)shareButton[i].addEventListener("click",function(e){e.preventDefault(),window.open(this.href,"SNSwindow","width=600, height=500, menubar=no, toolbar=no, scrollbars=yes")},!1);
// Toggle focus on tablets
$('.menu-item-has-children > a').on('touchstart', function(e){var el = $(this).parent('li');if (!el.hasClass('focus')){e.preventDefault();el.toggleClass('focus');el.siblings('.focus').removeClass('focus');}});
// LP cta fixed
$(window).scroll(function(){var nav=$("#lp-header-cta-scroll");$(window).scrollTop()>80?nav.addClass("nav-fixed"):nav.removeClass("nav-fixed")});
// Nav fixed
if($("#scroll-nav").length){$(window).scroll(function(){var l=$("#gnav");offset=l.offset(),scroll=$("#scroll-nav"),$(window).scrollTop()>offset.top?scroll.addClass("nav-fixed"):scroll.removeClass("nav-fixed")});;}
// Side fixed
if($(".side-widget-fixed").length){$(".side-widget-fixed").fitSidebar({wrapper:".container",responsiveWidth:993});
$(window).load(function() {var widget=$(".side-widget-fixed");var widgetTop=widget.offset();$(window).scroll(function () {if($(window).scrollTop() > widgetTop.top) {widget .addClass("widget-fixed");
} else {widget .removeClass("widget-fixed");}});});}
// Mobile scroll nav
if( $("#mb-scroll-nav").length){$(window).scroll(function(){var l=$(".modal-menu");offset=l.offset(),scroll=$("#mb-scroll-nav"),$(window).scrollTop()>offset.top?scroll.addClass("nav-fixed"):scroll.removeClass("nav-fixed")});;}
// Top scroll
$('a[href=#top]').click(function () {$('html,body').animate({scrollTop:0}, 500);return false;});
// Testimonial slider
$("#slider-for").slick({slidesToShow:1,slidesToScroll:1,arrows:!1,fade:!0,asNavFor:"#slider-nav"}),$("#slider-nav").slick({slidesToShow:1,slidesToScroll:1,asNavFor:"#slider-for",arrows:!1,speed:150,dots:!0,centerMode:!0,focusOnSelect:!0});
// Mobile footer buttons margin
$(window).on("load resize",function(){var o=$(window).width(),i=768,n=$(".mobile-footer-btn").innerHeight();i>o?$(".footer").css("margin-bottom",n):$(".footer").css("margin-bottom","0")});
// CTA popup fade
$(window).on("scroll",function(){var o=$(document).height(),n=$(window).height()+$(window).scrollTop();0.05>=(o-n)/o&&$("#cta-popup-fade").removeClass("display-none")});
// CTA popup click margin
if("hide"==$.cookie("cta-popup")){$(".cta-popup-switch").removeClass("popup-max").addClass("popup-hide");$(".cta-popup-icon").removeClass("fa-times").addClass("fa-chevron-up");$(".cta-popup-inner").addClass("display-none")}$("#cta-popup-btn").click(function(){if($.cookie("cta-popup")){$(".cta-popup-switch").removeClass("popup-min popup-hide").addClass("popup-max");$(".cta-popup-icon").removeClass("fa-chevron-up").addClass("fa-times");$(".cta-popup-inner").removeClass("display-none");$.removeCookie("cta-popup",{path:"/"})}else{$(".cta-popup-switch").removeClass("popup-max").addClass("popup-min");$(".cta-popup-icon").removeClass("fa-times").addClass("fa-chevron-up");setTimeout(function(){$(".cta-popup-inner").addClass("display-none")},700);$.cookie("cta-popup","hide",{expires:1,path:"/"})}return false});
// Mobile cta margin
$(window).on("load resize",function(){var o=$(window).width(),i=768,n=$(".lp-mobile-cta").innerHeight();i>o?$(".footer").css("margin-bottom",n):$(".footer").css("margin-bottom","0")});
// End jQuery
});